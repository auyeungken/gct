<html>
    <body>
        <table>
            <tr>
                <td colspan="2"><h1>GCT Contract</h1></td>
            </tr>
            <tr>
                <td colspan="2">
                    <div id="keysection"></div>
                </td>  
            </tr>
            <tr>
                <td colspan="2"><hr/></td>
            </tr>
            <tr>
                <td>                    
                    Contract Address : <input type="text" id='txtgctaddress' value=""/>
                    <input type="button" value="Load Contract" onclick="loadContract()"/>
                </td>                
            </tr>
            <tr>
                <td colspan="2"><hr/></td>
            </tr>
            <tr>
                <td colspan="2">
                    <fieldset>
                        <legend><h3>GCT Operation</h3></legend>
                        <table border="1">
                            <!--<tr>
                                <td colspan="2">
                                    Gas Price in Gwei <input type="text" id="gasprice" value="1" onkeyup="$('#gasWeiAmt').html(convertToWei($(this).val(),'9').toString())"/> (Wei : <span id="gasWeiAmt"></span>)
                                    <br/>
                                    <br/>
                                </td>
                            </tr>-->
                            <tr>
                                <td>Set Crowdsale Contract Address<br/>(Only Contract Owner)</td>
                                <td>
                                    <div class="operation">
                                        <table>                                            
                                            <tr>
                                                <td class="require">Address</td>
                                                <td><input type="text" name="param"/></td>
                                            </tr>
                                            <!-- <tr>
                                                <td>Gas</td>
                                                <td><input type="text" name="gas" value="1000000"/></td>
                                            </tr>-->  
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="contractUtils.sendValue('setCrowdsaleAccount',this,true,GCToken)"/>
                                                    <input type="button" value="Send" onclick="contractUtils.sendValue('setCrowdsaleAccount',this,false,GCToken)"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>                                        
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Private Sale Transfer<br/>(Only Private Sale Account)</td>
                                <td>
                                    <div class="operation">
                                        <table>
                                            <tr>
                                                <td class="require">To Address</td>
                                                <td><input type="text" name="param"/></td>
                                            </tr>
                                            <tr>
                                                <td class="require">Token Amount</td>
                                                <td><input type="text" id='pstokenamt'/><input type="hidden" name="param"/></td>
                                            </tr>
                                            <!-- <tr>
                                                <td>Gas</td>
                                                <td><input type="text" name="gas" value="1000000"/></td>
                                            </tr>-->  
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="pstransfer(this,true)"/>
                                                    <input type="button" value="Send" onclick="pstransfer(this,false)"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>                                        
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                    <fieldset>
                        <legend><h3>Get GCT Info - <input type="button" value="Load Contract" onclick="loadContract()"/></h3></legend>
                        <table border="1">
                            <tr>
                                <td>Contract Owner</td>
                                <td><span id='txtowner'></span></td>
                            </tr>
                            <tr>
                                <td>Name</td>
                                <td><span id='txtname'></span></td>
                            </tr>
                            <tr>
                                <td>symbol</td>
                                <td><span id='txtsymbol'></span></td>
                            </tr>
                            <tr>
                                <td>decimals</td>
                                <td><span id='txtdecimals'></span></td>
                            </tr>
                            <tr>
                                <td>Cap</td>
                                <td><span id='txtcap'></span></td>
                            </tr>
                            <tr>
                                <td>Minted Token</td>
                                <td><span id='txttotalSupply'></span></td>
                            </tr>
                            <tr>
                                <td>ICO Endtime</td>
                                <td><span id='txticoEndTime'></span></td>
                            </tr>
                            <tr>
                                <td>Token Balance<br/>&nbsp;</td>
                                <td><input type='text' id='tokenbalance'><input type='button' value='Get' onclick="contractUtils.getVal(getPrivateKey(), GCToken,'balanceOf',$('#txtbalanceOf'),$('#tokenbalance').val(),'1e+8')"/><br/>GCT <span id='txtbalanceOf'></span></td>
                            </tr>
                            <tr>
                                <td>crowdsaleAccount</td>
                                <td><span id='txtcrowdsaleAccount'></span></td>
                            </tr>                            
                            <tr>
                                <td>hasInit</td>
                                <td><span id='txthasInit'></span></td>
                            </tr>
                            <tr>
                                <td>Private Sale Account</td>
                                <td><span id='txtprivateSaleAccount'></span></td>
                            </tr>
                            <tr>
                                <td>Private Invest Lock Tokens</td>
                                <td><span id='txtprivateInvestLockToken'></span></td>
                            </tr>
                            <tr>
                                <td>Private Sale Release Time</td>
                                <td><span id='txtprivateSaleReleaseTime'></span></td>
                            </tr>
                            <tr>
                                <td>Private Sale Invested<br/>(only Owner or PrivateSale Account)</td>
                                <td><input type='text' id='privatesaleinvested'><input type='button' value='Get' onclick="contractUtils.getVal(getPrivateKey(), GCToken,'getPrivateSaleInvested', $('#txtgetPrivateSaleInvested'),$('#privatesaleinvested').val(),'1e+8')"/><br/>GCT <span id='txtgetPrivateSaleInvested'></span></td>
                            </tr>
                        </table>
                    </fieldset>
                </td>
            </tr>
        </table>
        <script>
            //$('#keysection').load('component/key.html');
            $('#txtgctaddress').val(gctContractAddr);

            function loadContract (){
                let arr = ['owner', 'name','symbol','decimals','icoEndTime','crowdsaleAccount','hasInit','privateSaleAccount','privateSaleReleaseTime'];
                
                let gctTokenArr = [
                    'totalSupply','cap','privateInvestLockToken',
                ];
                loadValues(arr);
                loadValues(gctTokenArr, '1e+8');
            }

            function loadValues(arr, decimals){                
                arr.forEach(function(currentValue, index, arr){
                    contractUtils.getVal(getPrivateKey(), GCToken,currentValue,$('#txt'+currentValue),undefined,decimals);
                });
            }

            function pstransfer(obj,isEstimate){
                let o = $('#pstokenamt');
                let ex = new BigNumber(o.val()).times(new BigNumber('1e08'));
                o.parent().find('input[name="param"]').val(ex.toString());
                console.log("Token Amt:", ex.toString());
                contractUtils.sendValue('privateSaleTransfer',obj,isEstimate,GCToken)
            }
        </script>
    </body>
</html>