<html>
    <body>
        <table>
            <tr>
                <td colspan="2"><h1>GCT Contract</h1></td>
            </tr>
            <tr>
                <td colspan="2">
                    <div id="keysection"></div>
                </td>  
            </tr>
            <tr>
                <td colspan="2"><hr/></td>
            </tr>
            <tr>
                <td>                    
                    Contract Address : <input type="text" id='txtgctaddress' value=""/>
                    <input type="button" value="Load Contract" onclick="loadContract()"/>
                </td>                
            </tr>
            <tr>
                <td colspan="2"><hr/></td>
            </tr>
            <tr>
                <td colspan="2">
                    <fieldset>
                        <legend><h3>GCT Operation</h3></legend>
                        <table border="1">
                            <tr>
                                <td>Claim Company Reserve<br/>(Only Company Account)</td>
                                <td>
                                    <div class="operation">
                                        <table>
                                            <!-- <tr>
                                                <td>Gas</td>
                                                <td><input type="text" name="gas" value="1000000"/></td>
                                            </tr>-->  
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="contractUtils.sendValue('claimCompanyReserve',this,true)"/>
                                                    <input type="button" value="Send" onclick="contractUtils.sendValue('claimCompanyReserve',this)"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>                                       
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Claim Team Reserve<br/>(Only Team Account)</td>
                                <td>
                                    <div class="operation">
                                        <table>     
                                            <!-- <tr>
                                                <td>Gas</td>
                                                <td><input type="text" name="gas" value="1000000"/></td>
                                            </tr>-->        
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="contractUtils.sendValue('claimTeamToken',this,true)"/>
                                                    <input type="button" value="Send" onclick="contractUtils.sendValue('claimTeamToken',this)"/>
                                                </td>
                                            </tr>  
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>                            
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>
                                        
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Set ICO Endtime<br/>(Only Contract Owner)</td>
                                <td>
                                    <div class="operation">
                                        <table> 
                                            <tr>
                                                <td class="require">Timestamp</td>
                                                <td><input type="text" name="param"/></td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="contractUtils.sendValue('setIcoEndTime',this,true)"/>
                                                    <input type="button" value="Send" onclick="contractUtils.sendValue('setIcoEndTime',this)"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Transfer<br/>(Only Private Sale Account)</td>
                                <td>
                                    <div class="operation">
                                        <table>
                                            <tr>
                                                <td class="require">GCT Balance</td>
                                                <td><input type='button' value='Get' onclick=" $('#tokenbalance0').html(selectedAcct);contractUtils.getVal(getPrivateKey(), GCToken,'balanceOf',$('#transbalanceOf'),selectedAcct,'1e+8');"/>&nbsp;<span type='text' id='tokenbalance0'/><br/>GCT <span id='transbalanceOf'></span></td>
                                            </tr>
                                            <tr>
                                                <td class="require">To Address</td>
                                                <td><input type="text" name="param"/></td>
                                            </tr>
                                            <tr>
                                                <td class="require">Token Amount</td>
                                                <td><input type="text" id='pstokenamt'/><input type="hidden" name="param"/></td>
                                            </tr>
                                            <!-- <tr>
                                                <td>Gas</td>
                                                <td><input type="text" name="gas" value="1000000"/></td>
                                            </tr>-->  
                                            <tr>
                                                <td colspan="2">
                                                    <input type="button" value="Estimate Gas" onclick="pstransfer(this,true)"/>
                                                    <input type="button" value="Send" onclick="pstransfer(this,false)"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td class="result" colspan="2">Result : <span class="result output" name="result"></span></td>
                                            </tr>
                                        </table>                                        
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                    <fieldset>
                        <legend><h3>Get GCT Info - <input type="button" value="Load Contract" onclick="loadContract()"/></h3></legend>
                        <table border="1">
                            <tr>
                                <td>Contract Owner</td>
                                <td><span id='txtowner'></span></td>
                            </tr>
                            <tr>
                                <td>Name</td>
                                <td><span id='txtname'></span></td>
                            </tr>
                            <tr>
                                <td>symbol</td>
                                <td><span id='txtsymbol'></span></td>
                            </tr>
                            <tr>
                                <td>decimals</td>
                                <td><span id='txtdecimals'></span></td>
                            </tr>
                            <tr>
                                <td>Cap(GCT)</td>
                                <td><span id='txtCAPPED_SUPPLY'></span></td>
                            </tr>
                            <tr>
                                <td>Wallet Address</td>
                                <td><span id='txtWALLET'></span></td>
                            </tr>
                            <tr>
                                <td>Crowdsale Address</td>
                                <td><span id='txtCROWDSALE_ACCOUNT'></span></td>
                            </tr>
                            <tr>
                                <td>Company Address</td>
                                <td><span id='txtCOMPANY_ACCOUNT'></span></td>
                            </tr>
                            <tr>
                                <td>Private Sale Address</td>
                                <td><span id='txtPRIVATE_SALE_ACCOUNT'></span></td>
                            </tr>
                            <tr>
                                <td>Team Address</td>
                                <td><span id='txtTEAM_ACCOUNT'></span></td>
                            </tr>
                            <tr>
                                <td>Promotion Address</td>
                                <td><span id='txtPROMOTION_ACCOUNT'></span></td>
                            </tr>
                            <tr>
                                <td>Minted Token(GCT)</td>
                                <td><span id='txttotalSupply'></span></td>
                            </tr>
                            <tr>
                                <td>ICO Endtime</td>
                                <td><span id='txticoEndTime'></span></td>
                            </tr>
                            <tr>
                                <td>Company Reserve(GCT)</td>
                                <td><span id='txtCOMPANY_RESERVE'></span></td>
                            </tr>
                            <tr>
                                <td>Company Reserve For</td>
                                <td><span id='txtCOMPANY_RESERVE_FOR'></span> Seconds</td>
                            </tr>
                            <tr>
                                <td>Company Claimed Reserve</td>
                                <td><span id='txtcompanyClaimed'></span></td>
                            </tr>
                            <tr>
                                <td>Team Start Claim After</td>
                                <td><span id='txtTEAM_CAN_CLAIM_AFTER'></span> Seconds</td>
                            </tr>
                            <tr>
                                <td>Team Claim Stage Every</td>
                                <td><span id='txtCLAIM_STAGE'></span> Seconds</td>
                            </tr>
                            <tr>
                                <td valign="top">Team Stage Reserve(GCT)</td>
                                <td><span id='txtteamReserve'></span></td>
                            </tr>
                            <tr>
                                <td>Token Balance<br/>&nbsp;</td>
                                <td><input type='text' id='tokenbalance'><input type='button' value='Get' onclick="contractUtils.getVal(getPrivateKey(), GCToken,'balanceOf',$('#txtbalanceOf'),$('#tokenbalance').val(),'1e+8')"/><br/>GCT <span id='txtbalanceOf'></span></td>
                            </tr>
                            
                        </table>
                    </fieldset>
                </td>
            </tr>
        </table>
        <script>
            //$('#keysection').load('component/key.html');
            $('#txtgctaddress').val(gctContractAddr);
           
            
            function loadContract (){
                let arr = [
                    'owner', 'name','symbol','decimals', 'WALLET','CROWDSALE_ACCOUNT','COMPANY_ACCOUNT','PRIVATE_SALE_ACCOUNT','TEAM_ACCOUNT','PROMOTION_ACCOUNT',
                    'COMPANY_RESERVE_FOR','companyClaimed','icoEndTime','TEAM_CAN_CLAIM_AFTER','CLAIM_STAGE'
                ];

                let gctTokenArr = [
                    'CAPPED_SUPPLY','TEAM_RESERVE','COMPANY_RESERVE','PRIVATE_SALE','PROMOTION_PROGRAM','CROWDSALE_SUPPLY','totalSupply',
                ];
  
                
                loadValues(arr);
                loadValues(gctTokenArr, '1e+8'); 
                loadArrVales('teamReserve',21 , '1e+8');
            }

            function loadValues(arr, decimals){                
                arr.forEach(function(currentValue, index, arr){
                    contractUtils.getVal(getPrivateKey(), GCToken,currentValue,$('#txt'+currentValue),undefined,decimals);
                });
            }

            async function loadArrVales(functionName, numElm, decimals){
                contractUtils.getArrayVal(getPrivateKey(), GCToken, functionName, $('#txt'+functionName),numElm,decimals);
            }

            function pstransfer(obj,isEstimate){
                let o = $('#pstokenamt');
                let ex = new BigNumber(o.val()).times(new BigNumber('1e08'));
                let addr = $(obj).parents('.operation').find('input[name="param"]').first().val();
                
                o.parent().find('input[name="param"]').val(ex.toString());
                if(confirm('Confirm transfer GCT ' + o.val() + '('+ex.toString()+') to ' + addr)){
                    contractUtils.sendValue('transfer',obj,isEstimate,GCToken)
                }
            }
        </script>
    </body>
</html>